{"ast":null,"code":"import _classCallCheck from\"/Users/heuchertc/sei/projects/lessthan30_django_env/lessthan30_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/heuchertc/sei/projects/lessthan30_django_env/lessthan30_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/heuchertc/sei/projects/lessthan30_django_env/lessthan30_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/heuchertc/sei/projects/lessthan30_django_env/lessthan30_frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{indexPublicPoems,indexPublicWords}from'../../api/poem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PublicPoems=/*#__PURE__*/function(_Component){_inherits(PublicPoems,_Component);var _super=_createSuper(PublicPoems);function PublicPoems(props){var _this;_classCallCheck(this,PublicPoems);_this=_super.call(this,props);_this.state={poems:[],words:[]};return _this;}_createClass(PublicPoems,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,user=_this$props.user,msgAlert=_this$props.msgAlert;indexPublicPoems(user).then(function(res){return _this2.setState({poems:res.data.poems});}).then(function(){msgAlert({heading:'See all <30 Poems',message:'Look at allll those Poems',variant:'success'});}).catch(function(error){msgAlert({heading:'Index Failed',message:'Index error:'+error.message,variant:'danger'});});indexPublicWords(user).then(function(res){return _this2.setState({words:res.data.words});});}},{key:\"wordsForPoem\",value:function wordsForPoem(poemid){var words=this.state.words;var poemwords=words.filter(function(word){return word.poem===poemid;});var wordsJSX=poemwords.map(function(word){return/*#__PURE__*/_jsx(\"div\",{className:\"public-words\",children:word.word},word.id);});return wordsJSX;}},{key:\"render\",value:function render(){var _this3=this;var poems=this.state.poems;if(poems===null){return'Loading...';}var poemJSX;if(poems.length===0){poemJSX='No poems created yet!';}else{// eslint-disable-next-line array-callback-return\npoemJSX=poems.map(function(poem){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[poem.title,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"public-poems\",children:_this3.wordsForPoem(poem.id)})]},poem.id);}).reverse();//.reverse to most recently created at the tops\n}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Public Poems\"}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"font-link\",children:poemJSX})]});}}]);return PublicPoems;}(Component);export default PublicPoems;","map":{"version":3,"sources":["/Users/heuchertc/sei/projects/lessthan30_django_env/lessthan30_frontend/src/components/Poems/PublicPoems.js"],"names":["React","Component","indexPublicPoems","indexPublicWords","PublicPoems","props","state","poems","words","user","msgAlert","then","res","setState","data","heading","message","variant","catch","error","poemid","poemwords","filter","word","poem","wordsJSX","map","id","poemJSX","length","title","wordsForPoem","reverse"],"mappings":"wlBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,gBAAT,CAA2BC,gBAA3B,KAAmD,gBAAnD,C,gJAEMC,CAAAA,W,0GACJ,qBAAaC,KAAb,CAAoB,6CAClB,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,EADI,CAEXC,KAAK,CAAE,EAFI,CAAb,CAHkB,aAOnB,C,yDAED,4BAAqB,iBACnB,gBAA2B,KAAKH,KAAhC,CAAQI,IAAR,aAAQA,IAAR,CAAcC,QAAd,aAAcA,QAAd,CAEAR,gBAAgB,CAACO,IAAD,CAAhB,CACGE,IADH,CACQ,SAACC,GAAD,QAAS,CAAA,MAAI,CAACC,QAAL,CAAc,CAAEN,KAAK,CAAEK,GAAG,CAACE,IAAJ,CAASP,KAAlB,CAAd,CAAT,EADR,EAEGI,IAFH,CAEQ,UAAM,CACVD,QAAQ,CAAC,CACPK,OAAO,CAAE,mBADF,CAEPC,OAAO,CAAE,2BAFF,CAGPC,OAAO,CAAE,SAHF,CAAD,CAAR,CAKD,CARH,EASGC,KATH,CASS,SAACC,KAAD,CAAW,CAChBT,QAAQ,CAAC,CACPK,OAAO,CAAE,cADF,CAEPC,OAAO,CAAE,eAAiBG,KAAK,CAACH,OAFzB,CAGPC,OAAO,CAAE,QAHF,CAAD,CAAR,CAKD,CAfH,EAgBAd,gBAAgB,CAACM,IAAD,CAAhB,CACGE,IADH,CACQ,SAACC,GAAD,QAAS,CAAA,MAAI,CAACC,QAAL,CAAc,CAAEL,KAAK,CAAEI,GAAG,CAACE,IAAJ,CAASN,KAAlB,CAAd,CAAT,EADR,EAED,C,4BAEH,sBAAcY,MAAd,CAAsB,CAClB,GAAQZ,CAAAA,KAAR,CAAkB,KAAKF,KAAvB,CAAQE,KAAR,CACA,GAAIa,CAAAA,SAAS,CAAGb,KAAK,CAACc,MAAN,CAAa,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,IAAL,GAAcJ,MAAxB,EAAb,CAAhB,CACA,GAAIK,CAAAA,QAAQ,CAAGJ,SAAS,CAACK,GAAV,CAAc,SAACH,IAAD,qBACzB,YAAmB,SAAS,CAAC,cAA7B,UAA6CA,IAAI,CAACA,IAAlD,EAAUA,IAAI,CAACI,EAAf,CADyB,EAAd,CAAf,CAGA,MAAOF,CAAAA,QAAP,CACH,C,sBAGD,iBAAU,iBACR,GAAQlB,CAAAA,KAAR,CAAkB,KAAKD,KAAvB,CAAQC,KAAR,CACA,GAAIA,KAAK,GAAK,IAAd,CAAoB,CAClB,MAAO,YAAP,CACD,CAED,GAAIqB,CAAAA,OAAJ,CACA,GAAIrB,KAAK,CAACsB,MAAN,GAAiB,CAArB,CAAwB,CACtBD,OAAO,CAAG,uBAAV,CACD,CAFD,IAEO,CACL;AACAA,OAAO,CAAGrB,KAAK,CAACmB,GAAN,CAAU,SAACF,IAAD,qBAClB,oCACE,sBAAKA,IAAI,CAACM,KAAV,OADF,cAEE,YAAK,SAAS,CAAC,cAAf,UACK,MAAI,CAACC,YAAL,CAAkBP,IAAI,CAACG,EAAvB,CADL,EAFF,GAAUH,IAAI,CAACG,EAAf,CADkB,EAAV,EAOPK,OAPO,EAAV,CAQI;AACL,CACD,mBACE,wCACE,oCADF,cAEE,YAFF,cAGE,YAAK,SAAS,CAAC,WAAf,UAA4BJ,OAA5B,EAHF,GADF,CAQD,C,yBAxEyB3B,S,EA2E1B,cAAeG,CAAAA,WAAf","sourcesContent":["import React, { Component } from 'react'\nimport { indexPublicPoems, indexPublicWords } from '../../api/poem'\n\nclass PublicPoems extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      poems: [],\n      words: []\n    }\n  }\n\n  componentDidMount () {\n    const { user, msgAlert } = this.props\n\n    indexPublicPoems(user)\n      .then((res) => this.setState({ poems: res.data.poems }))\n      .then(() => {\n        msgAlert({\n          heading: 'See all <30 Poems',\n          message: 'Look at allll those Poems',\n          variant: 'success'\n        })\n      })\n      .catch((error) => {\n        msgAlert({\n          heading: 'Index Failed',\n          message: 'Index error:' + error.message,\n          variant: 'danger'\n        })\n      })\n    indexPublicWords(user)\n      .then((res) => this.setState({ words: res.data.words }))\n  }\n\nwordsForPoem (poemid) {\n    const { words } = this.state\n    let poemwords = words.filter((word) => word.poem === poemid)\n    let wordsJSX = poemwords.map((word) => (\n        <div key={word.id} className='public-words'>{word.word}</div>\n    ))\n    return wordsJSX\n}\n\n\nrender () {\n  const { poems } = this.state\n  if (poems === null) {\n    return 'Loading...'\n  }\n\n  let poemJSX\n  if (poems.length === 0) {\n    poemJSX = 'No poems created yet!'\n  } else {\n    // eslint-disable-next-line array-callback-return\n    poemJSX = poems.map((poem) => (\n      <div key={poem.id} >\n        <h3>{poem.title} </h3>\n        <div className='public-poems'>\n            {this.wordsForPoem(poem.id)}\n        </div>\n      </div>\n    )).reverse()\n        //.reverse to most recently created at the tops\n  }\n  return (\n    <>\n      <h1>Public Poems</h1>\n      <p></p>\n      <div className=\"font-link\">{poemJSX}</div>\n\n    </>\n  )\n}\n}\n\nexport default PublicPoems\n"]},"metadata":{},"sourceType":"module"}